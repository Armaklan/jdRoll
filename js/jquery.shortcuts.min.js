/* mousetrap v1.4.0 craig.is/killing/mice */
(function(){function r(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function y(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return g[a.which]?g[a.which]:z[a.which]?z[a.which]:String.fromCharCode(a.which).toLowerCase()}function s(a){a=a||{};var b=!1,c;for(c in m)a[c]?b=!0:m[c]=0;b||(t=!1)}function A(a,b,c,d,h){var f,e,g=[],k=c.type;if(!l[a])return[];"keyup"==k&&u(a)&&(b=[a]);for(f=0;f<l[a].length;++f)if(e=l[a][f],
!(e.seq&&m[e.seq]!=e.level)&&k==e.action&&("keypress"==k&&!c.metaKey&&!c.ctrlKey||b.sort().join(",")===e.modifiers.sort().join(",")))d&&e.combo==h&&l[a].splice(f,1),g.push(e);return g}function G(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function v(a,b,c){if(!j.stopCallback(b,b.target||b.srcElement,c)&&!1===a(b,c))b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.returnValue=!1,b.cancelBubble=
!0}function w(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=y(a);b&&("keyup"==a.type&&x==b?x=!1:j.handleKey(b,G(a),a))}function u(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function B(a,b,c){if(!c){if(!p){p={};for(var d in g)95<d&&112>d||g.hasOwnProperty(d)&&(p[g[d]]=d)}c=p[a]?"keydown":"keypress"}"keypress"==c&&b.length&&(c="keydown");return c}function C(a,b,c,d,h){q[a+":"+c]=b;a=a.replace(/\s+/g," ");var f=a.split(" "),e,g,k=[];if(1<f.length){var j=a,n=c;m[j]=0;n||(n=B(f[0],[]));
a=function(){t=n;++m[j];clearTimeout(D);D=setTimeout(s,1E3)};c=function(a){v(b,a,j);"keyup"!==n&&(x=y(a));setTimeout(s,10)};for(d=0;d<f.length;++d)C(f[d],d<f.length-1?a:c,n,j,d)}else{g="+"===a?["+"]:a.split("+");for(f=0;f<g.length;++f)e=g[f],E[e]&&(e=E[e]),c&&("keypress"!=c&&F[e])&&(e=F[e],k.push("shift")),u(e)&&k.push(e);c=B(e,k,c);l[e]||(l[e]=[]);A(e,k,{type:c},!d,a);l[e][d?"unshift":"push"]({callback:b,modifiers:k,action:c,seq:d,level:h,combo:a})}}for(var g={8:"backspace",9:"tab",13:"enter",16:"shift",
17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},z={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},F={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},E={option:"alt",command:"meta",
"return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p,l={},q={},m={},D,x=!1,t=!1,h=1;20>h;++h)g[111+h]="f"+h;for(h=0;9>=h;++h)g[h+96]=h;r(document,"keypress",w);r(document,"keydown",w);r(document,"keyup",w);var j={bind:function(a,b,c){a=a instanceof Array?a:[a];for(var d=0;d<a.length;++d)C(a[d],b,c);return this},unbind:function(a,b){return j.bind(a,function(){},b)},trigger:function(a,b){if(q[a+":"+b])q[a+":"+b]({},a);return this},reset:function(){l={};
q={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.contentEditable&&"true"==b.contentEditable},handleKey:function(a,b,c){b=A(a,b,c);var d,g={},f=0,e=!1;for(d=0;d<b.length;++d)b[d].seq&&(f=Math.max(f,b[d].level));for(d=0;d<b.length;++d)b[d].seq?b[d].level==f&&(e=!0,g[b[d].seq]=1,v(b[d].callback,c,b[d].combo)):e||v(b[d].callback,c,b[d].combo);c.type==t&&!u(a)&&s(g)}};window.Mousetrap=
j;"function"===typeof define&&define.amd&&define(j)})();

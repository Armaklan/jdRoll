{% extends "squelette.html.twig" %}

{% block content %}

	{% if (error != "") %}
	    <div class="alert alert-error">
	    	{{ error }}
	    </div>
    {% endif %}

    <div align="center">
    	<h2>{{ campagne.name }}</h2>
    </div>
    <div align="right">
    	<a href="{{ path('forum_campagne', {campagne_id: campagne.id}) }}" class="btn iconeBtn sidebarBtn" title="Forum"><i class="icon-globe"></i></a>
    	{% if is_mj or is_participant %}
			<a href="{{ path('perso_pnj', {campagne_id: campagne.id}) }}" class="btn iconeBtn sidebarBtn" title="Galerie des PNJ"><i class="icon-user"></i></a>
			{% if is_mj %}
				<a href="{{ path('campagne_edit', {id : campagne.id}) }}" class="btn iconeBtn btn-primary" title="Editer"><i class="icon-edit"></i></a>
			{% endif %}
    	{% else %}
    		<a href="{{ path('campagne_join', {'id' : campagne.id})}}" class="btn btn-primary"><i class="icon-share"></i> Rejoindre la partie</a>
    	{% endif %}
    </div>
    <p><b>Univers de la campagne : </b> {{ campagne.univers }}</p>
    <p><b>Système de jeu : </b> {{ campagne.systeme }}</p>
    <p><b>Nombre de joueurs : </b> {{ campagne.nb_joueurs }}</p>
    <p><b>Description : </b> </p>
    {% autoescape false %}
    	<p>{{ campagne.description }}</p>
    {% endautoescape %}
    <p></p>
	<table class="table table-striped table-hover campagneTable">
			<thead>
				<tr>
					<th colspan="2">Joueurs</th>
				</tr>
			</thead>
			<tbody>
				{% for participant in participants %}
				<tr>
					<td>{{ participant.username }}</td>
					<td width="90px" style="text-align : right" >
					{% if is_mj and participant.part_statut == 1 %}
						<a href="{{ path('campagne_ban', {id : campagne.id, user_id: participant.id}) }}" title="Désinscrire" class="btn btn-danger iconeBtn"><i class="icon-remove"></i></a>
                                        {% else %}
                                                <a href="{{ path('campagne_join_valid', {id : campagne.id, user_id: participant.id}) }}" title="Valider l'inscription" class="btn btn-primary iconeBtn"><i class="icon-ok"></i></a>
                                                <a href="{{ path('campagne_ban', {id : campagne.id, user_id: participant.id}) }}" title="Refuser l'inscription" class="btn btn-danger iconeBtn"><i class="icon-remove"></i></a>
					{% endif %}
					</td>
				<tr>
				{% endfor %}
			</tbody>
	</table>
{% endblock %}